---
layout:     post
title:      IOS-ABM-商务分发
subtitle:   IOS-ABM-商务分发
date:       2024-04-11
author:     SkioFox
header-img: img/post-bg-alibaba.jpg
catalog: true
tags:
- ABM
- IOS
- 上架
---

**目前苹果新推出的支持苹果ABM应用分发模式**

先看看苹果现在支持的分发模式

![](/img/2024-04-11/1.png)

这里重点只讲 苹果商务管理，Apple Business Manager 简称ABM，用于

\- 定制应用分发

\- 公司/组织内部应用分发

如果你的应用是上边两种类型就考虑用ABM分发了，这类应用的特点是

\- 有账号登录，但是没有注册功能

\- 应用界面功能与市场上应用相同，只是logo、名称等不一致

\- 应用在上架App Store时会被拒绝

需要说明的是使用ABM分发应用能上架到App Store，但是不能直接被搜索出来，要有“兑换码”才能在App Store下载应用

**ABM的好处**

定制应用互相之间相似度可能非常高，但是苹果**不会**因为这个问题拒绝通过应用审核！也就是江湖上所说的[App Store 应用审核 4.3条款](https://developer.apple.com/cn/app-store/review/guidelines/%23spam)问题，因为应用相似度太高而无法通过审核的问题，大家不用担心。

举个例子：中国移动想让腾讯给它的员工定制一个换过移动logo的微信，这时开发者是腾讯，苹果商务账号持有者是中国移动，用户是中国移动的员工。
  
![](/img/2024-04-11/2.png)

**需求背景**

公司自身没有使用ABM模式，ABM一般用在不需要上架应用商店的私有化租户，以前是企业证书模式流程：

公司打包构建 > 扫描二维码下载 > 信任证书使用（证书有效期一年）；

改为ABM模式流程：

公司打包构建 > 上传到App Store > 苹果进行APP审核 > 生成邀请码并上传到应用分发后台 > 扫描二维码跳转到商店兑换APP

**前提条件**

客户已有ABM账号 并将ID、组织名称提供给公司

![](/img/2024-04-11/3.png)

**整体流程**

![](/img/2024-04-11/4.png)

**客户端用户下载流程**

![](/img/2024-04-11/5.png)

**公司需要提供：**

* 编写下载H5页面
* 编写上传邀请码服务，需要区分多应用、单环境（目前只需要生产环境）

一旦点击安装按钮，则判定该邀请码已经被使用，使用后标记不允许再次使用；

如邀请码使用完，需要弹出交互；

* 通过收集设备标识码、客户端IP等等信息，通过后台对兑换码的获取进行风险限制，防止被恶意消耗。

**业务知识****：**

关于兑换码

\- 一个兑换码只能用一次，但可以在ABM批量下载兑换码

\- 理论上每周可以下25000个，建议一次下10000个，等用的差不多再重新下载

其他问题

* 通过直接链接下载，AppStore中搜不到，上架需要苹果审核。
* 已上架AppStore的App，可以通过申请转为非公开App。不需要重新上传，是同一个ID同一个名称，避免用户迁移。
* 更新App后，用户能在AppStore中收到更新通知

* 上传的测试App不能过于简单，否则无法上架，
* 无法判断兑换码是否被使用，只能在点击下载的时候则给兑换码打上已使用的标记
* 生成兑换码的时候，一次5000条会更快生成

**流程参考：**

![](/img/2024-04-11/6.png)

![](/img/2024-04-11/7.png)

**资料参考：**
\> <https://www.jianshu.com/p/c8361a83a338?ivk_sa=1024320u>
